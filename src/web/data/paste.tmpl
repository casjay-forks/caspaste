{{/*
   This file is part of CasPaste.

   This file is part of CasPaste.

   CasPaste is free software released under the MIT License.
   See LICENSE file for details.
*/}}

{{define "titlePrefix"}}{{if .Title}}{{.Title}}{{else}}{{.ID}}{{end}} | {{end}}
{{define "headAppend"}}
<script src="/paste.js"></script>
<script src="/code.js"></script>
{{end}}
{{define "article"}}
{{if .Title}}<input class="stretch-width" value="{{.Title}}" tabindex=1 readonly>
{{end}}

<div class="text-bar">
	{{if .IsFile}}
	<div>{{.FileName}} ({{.MimeType}}, {{.FileSize}} bytes)</div>
	{{else}}
	<div>{{.Syntax}}, {{.LineEnd}}</div>
	{{end}}

	{{if not .OneUse}}
	<div class="text-bar-right">
		{{if not .IsImage}}{{if not .IsVideo}}{{if not .IsAudio}}{{if not .IsPDF}}
		<a href="/raw/{{.ID}}" tabindex=2>{{ call .Translate `paste.Raw` }}</a>
		{{end}}{{end}}{{end}}{{end}}
		<a href="/dl/{{.ID}}" tabindex=3>{{ call .Translate `paste.Download` }}</a>
		{{if not .IsFile}}<a{{if ne .DeleteTime 0}} class="text-grey"{{end}} href="/emb_help/{{.ID}}" tabindex=4>{{ call .Translate `paste.Embedded`}}</a>{{end}}
	</div>
	{{end}}
</div>

{{if .IsImage}}
<div class="file-preview">
	<img src="{{.MediaDataURL}}" alt="{{.FileName}}">
</div>
{{else if .IsVideo}}
<div class="file-preview">
	<video controls>
		<source src="{{.MediaDataURL}}" type="{{.MimeType}}">
		Your browser does not support the video tag.
	</video>
</div>
{{else if .IsAudio}}
<div class="file-preview">
	<audio controls>
		<source src="{{.MediaDataURL}}" type="{{.MimeType}}">
		Your browser does not support the audio tag.
	</audio>
</div>
{{else if .IsPDF}}
<div class="file-preview file-preview-pdf">
	<iframe src="{{.MediaDataURL}}"></iframe>
</div>
{{else if and .IsFile (not .IsText)}}
<div class="file-preview file-binary">
	<p>Binary file: <strong>{{.FileName}}</strong></p>
	<p>Type: {{.MimeType}}</p>
	<p>Size: {{.FileSize}} bytes</p>
	<p><a href="/dl/{{.ID}}" class="download-btn">Download File</a></p>
</div>
{{else}}
{{.Body}}
{{end}}

{{if and (ne .Author ``) (ne .AuthorEmail ``) (ne .AuthorURL ``) }}<p>{{ call .Translate `paste.Author` }} {{.Author}} &lt<a href="mailto:{{.AuthorEmail}}">{{.AuthorEmail}}</a>&gt - <a target="_blank" href="{{.AuthorURL}}">{{.AuthorURL}}</a></p>{{end}}
{{if and (ne .Author ``) (ne .AuthorEmail ``) (eq .AuthorURL ``) }}<p>{{ call .Translate `paste.Author` }} {{.Author}} &lt<a href="mailto:{{.AuthorEmail}}">{{.AuthorEmail}}</a>&gt</p>{{end}}
{{if and (ne .Author ``) (eq .AuthorEmail ``) (ne .AuthorURL ``) }}<p>{{ call .Translate `paste.Author` }} {{.Author}} - <a target="_blank" href="{{.AuthorURL}}">{{.AuthorURL}}</a></p>{{end}}
{{if and (eq .Author ``) (ne .AuthorEmail ``) (ne .AuthorURL ``) }}<p>{{ call .Translate `paste.Author` }} <a href="mailto:{{.AuthorEmail}}">{{.AuthorEmail}}</a> - <a target="_blank" href="{{.AuthorURL}}">{{.AuthorURL}}</a></p>{{end}}
{{if and (ne .Author ``) (eq .AuthorEmail ``) (eq .AuthorURL ``) }}<p>{{ call .Translate `paste.Author` }} {{.Author}}</p>{{end}}
{{if and (eq .Author ``) (ne .AuthorEmail ``) (eq .AuthorURL ``) }}<p>{{ call .Translate `paste.Author` }} <a href="mailto:{{.AuthorEmail}}">{{.AuthorEmail}}</a></p>{{end}}
{{if and (eq .Author ``) (eq .AuthorEmail ``) (ne .AuthorURL ``) }}<p>{{ call .Translate `paste.Author` }} <a target="_blank" href="{{.AuthorURL}}">{{.AuthorURL}}</a></p>{{end}}

<p>{{ call .Translate `paste.Created` }} <span id="createTime">{{.CreateTimeStr}}</span></p>

{{if .OneUse}}
<p>{{ call .Translate `paste.Expires` }} <span class="text-red">{{ call .Translate `paste.Now` }}</span></p>
{{else if eq .DeleteTime 0}}
<p>{{ call .Translate `paste.Expires` }} {{ call .Translate `paste.Never` }}</p>
{{else}}
<p>{{ call .Translate `paste.Expires` }} <span id="deleteTime">{{.DeleteTimeStr}}</span></p>
{{end}}

{{end}}
