{{/*
   This file is part of CasPaste.

   This file is part of CasPaste.

   CasPaste is free software released under the MIT License.
   See LICENSE file for details.
*/}}

{{define "titlePrefix"}}{{end}}
{{define "headAppend"}}<script src="/main.js"></script><script src="/burn-after.js"></script>{{end}}
{{define "article"}}
{{if ne .TitleMaxLen 0}}<h1>{{call .Translate `main.CreatePaste`}}</h1>{{end}}
<form id="create-paste-form" action="/" method="post" enctype="multipart/form-data" aria-label="Create new paste">
	<input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
	<div class="form-row">
		<div class="form-group">
			{{if ne .TitleMaxLen 0}}
			<label for="paste-title">{{ call .Translate `main.EnterTitle` }}</label>
			<input
				id="paste-title"
				class="stretch-width" 
				name="title" 
				{{if gt .TitleMaxLen 0}}maxlength="{{.TitleMaxLen}}"{{end}}
				autocomplete="off" 
				autocorrect="off" 
				spellcheck="true"
				placeholder="{{call .Translate `main.EnterTitle`}}" 
				tabindex="1" 
				autofocus
				aria-label="Paste title"
			>
			{{else}}
			<h1>{{call .Translate `main.CreatePaste`}}</h1>
			{{end}}
		</div>
		<div class="form-group">
			<label for="line-end">Line ending</label>
			<select id="line-end" name="lineEnd" tabindex="2" aria-label="Select line ending format">
				<option value="LF">UNIX (LF)</option>
				<option value="CRLF">Windows/DOS (CRLF)</option>
				<option value="CR">Macintosh (CR)</option>
			</select>
		</div>
	</div>
	
	<div class="form-group">
		<label for="editor">{{ call .Translate `main.EnterText` }}</label>
		<div id="editor-container">
			<textarea
				id="editor"
				name="body"
				placeholder="{{ call .Translate `main.EnterText` }}"
				{{if gt .BodyMaxLen 0}}maxlength="{{.BodyMaxLen}}"{{end}}
				autocomplete="off"
				autocorrect="off"
				spellcheck="true"
				rows="20"
				wrap="off"
				tabindex="3"
				aria-label="Paste content"
			></textarea>
		</div>
		<div class="char-counter-container">
			<span aria-live="polite" id="symbolCounterContainer"></span>
		</div>
	</div>
	
	<div class="form-group">
		<input 
			type="file" 
			id="paste-file" 
			name="file" 
			tabindex="4"
			aria-label="Upload file (optional)"
			class="file-input"
		>
		<label for="paste-file" class="file-label">Browse for file...</label>
		<p class="form-help">Upload File (optional, 50MB max)</p>
	</div>
	
	<div class="form-row form-row-3col">
		<div class="form-group">
			<label for="syntax">{{ call .Translate `main.Syntax` }}</label>
			<select id="syntax" name="syntax" tabindex="5" aria-label="Select syntax highlighting">
				<option value="autodetect" selected>{{ call .Translate `main.AutoDetect` }}</option>
				{{range .Lexers}}
				<option value="{{.}}">{{.}}</option>
				{{end}}
			</select>
		</div>
		
		<div class="form-group">
			<label for="burn-after">{{ call .Translate `main.BurnAfterReading` }}</label>
			<select id="burn-after" name="oneUse" tabindex="6" aria-label="Burn after reading options">
				<option value="">{{ call .Translate `main.Disabled` }}</option>
				<option value="1">{{ call .Translate `main.ViewOnce` }}</option>
				<option value="5">5 {{ call .Translate `main.Views` }}</option>
				<option value="10">10 {{ call .Translate `main.Views` }}</option>
				<option value="25">25 {{ call .Translate `main.Views` }}</option>
				<option value="100">100 {{ call .Translate `main.Views` }}</option>
				<option value="custom">{{ call .Translate `main.Custom` }}</option>
			</select>
			<input 
				type="number" 
				id="burn-custom" 
				class="burn-custom-input"
				name="oneUseCustom" 
				min="1" 
				max="9999" 
				placeholder="Max 9999"
				aria-label="Custom number of views (1-9999)"
			>
		</div>
		
		<div class="form-group">
			<label for="expiration">{{ call .Translate `main.Expiration` }}</label>
			<select id="expiration" name="expiration" tabindex="7" aria-label="Select expiration time">
				{{if lt .MaxLifeTime 0}}<option value="0">{{ call .Translate `main.Never` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 600) (lt .MaxLifeTime 0)}}<option value="600"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 0) (lt .MaxLifeTime 1800)}} selected{{end}}{{if eq .UiDefaultLifeTime `10min`}} selected{{end}}>{{ call .Translate `main.10Minutes` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 1800) (lt .MaxLifeTime 0)}}<option value="1800"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 600) (lt .MaxLifeTime 3600)}} selected{{end}}{{if eq .UiDefaultLifeTime `30min`}} selected{{end}}>{{ call .Translate `main.30Minutes` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 3600) (lt .MaxLifeTime 0)}}<option value="3600"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 1800) (lt .MaxLifeTime 7200)}} selected{{end}}{{if eq .UiDefaultLifeTime `1h`}} selected{{end}}>{{ call .Translate `main.1Hour` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 7200) (lt .MaxLifeTime 0)}}<option value="7200"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 3600) (lt .MaxLifeTime 14400)}} selected{{end}}{{if eq .UiDefaultLifeTime `2h`}} selected{{end}}>{{ call .Translate `main.2Hour` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 14400) (lt .MaxLifeTime 0)}}<option value="14400"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 7200) (lt .MaxLifeTime 43200)}} selected{{end}}{{if eq .UiDefaultLifeTime `4h`}} selected{{end}}>{{ call .Translate `main.4Hour` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 43200) (lt .MaxLifeTime 0)}}<option value="43200"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 14400) (lt .MaxLifeTime 86400)}} selected{{end}}{{if eq .UiDefaultLifeTime `12h`}} selected{{end}}>{{ call .Translate `main.12Hour` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 86400) (lt .MaxLifeTime 0)}}<option value="86400"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 43200) (lt .MaxLifeTime 604800)}} selected{{end}}{{if eq .UiDefaultLifeTime `1d`}} selected{{end}}>{{ call .Translate `main.1Day` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 604800) (lt .MaxLifeTime 0)}}<option value="604800"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 86400) (lt .MaxLifeTime 1209600)}} selected{{end}}{{if eq .UiDefaultLifeTime `1w`}} selected{{end}}>{{ call .Translate `main.1Week` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 1209600) (lt .MaxLifeTime 0)}}<option value="1209600"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 604800) (lt .MaxLifeTime 2592000)}} selected{{end}}{{if eq .UiDefaultLifeTime `2w`}} selected{{end}}>{{ call .Translate `main.2Weeks` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 2592000) (lt .MaxLifeTime 0)}}<option value="2592000"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 1209600) (lt .MaxLifeTime 5184000)}} selected{{end}}{{if eq .UiDefaultLifeTime `1mon`}} selected{{end}}>{{ call .Translate `main.1Month` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 5184000) (lt .MaxLifeTime 0)}}<option value="5184000"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 2592000) (lt .MaxLifeTime 15552000)}} selected{{end}}{{if eq .UiDefaultLifeTime `2mon`}} selected{{end}}>{{ call .Translate `main.2Months` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 15552000) (lt .MaxLifeTime 0)}}<option value="15552000"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 5184000) (lt .MaxLifeTime 31536000)}} selected{{end}}{{if eq .UiDefaultLifeTime `6mon`}} selected{{end}}>{{ call .Translate `main.6Months` }}</option>{{end}}
				{{if or (ge .MaxLifeTime 31536000) (lt .MaxLifeTime 0)}}<option value="31536000"{{if and (eq .UiDefaultLifeTime ``) (gt .MaxLifeTime 15552000)}} selected{{end}}{{if eq .UiDefaultLifeTime `1y`}} selected{{end}}>{{ call .Translate `main.1Year` }}</option>{{end}}
			</select>
		</div>
	</div>
	
	<details>
		<summary>{{ call .Translate `main.AdvancedParameters` }}</summary>
		<fieldset>
			<legend class="visually-hidden">Author information</legend>
			<div class="form-group">
				<label for="author">{{ call .Translate `main.Author` }}</label>
				<input
					id="author"
					name="author" 
					value="{{.AuthorDefault}}"
					autocomplete="off" 
					autocorrect="off" 
					spellcheck="true"
					placeholder="{{call .Translate `main.AuthorPlaceholder`}}"
					tabindex="-1" 
					maxlength="{{.AuthorAllMaxLen}}"
					aria-label="Author name"
				>
			</div>
			<div class="form-group">
				<label for="authorEmail">{{ call .Translate `main.AuthorEmail` }}</label>
				<input
					id="authorEmail"
					type="email"
					name="authorEmail" 
					value="{{.AuthorEmailDefault}}"
					autocomplete="off" 
					autocorrect="off" 
					spellcheck="true"
					placeholder="{{call .Translate `main.AuthorEmailPlaceholder`}}"
					tabindex="-1" 
					maxlength="{{.AuthorAllMaxLen}}"
					aria-label="Author email"
				>
			</div>
			<div class="form-group">
				<label for="authorURL">{{ call .Translate `main.AuthorURL` }}</label>
				<input
					id="authorURL"
					type="url"
					name="authorURL"  
					value="{{.AuthorURLDefault}}"
					autocomplete="off" 
					autocorrect="off" 
					spellcheck="true"
					placeholder="{{call .Translate `main.AuthorURLPlaceholder`}}"
					tabindex="-1" 
					maxlength="{{.AuthorAllMaxLen}}"
					aria-label="Author URL"
				>
			</div>
		</fieldset>
		<p class="help-text">{{call .Translate `main.AdvancedParametersHelp` `/settings`}}</p>
	</details>
	
	<div class="form-actions">
		<button class="button-green" type="submit" tabindex="8">{{ call .Translate `main.Create` }}</button>
	</div>
</form>
{{end}}
